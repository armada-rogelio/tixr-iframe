<!DOCTYPE html>
<html>
<head>
  <title>Tixr Conversion Tracker</title>
  <meta charset="utf-8">
</head>
<body>
  <script>
    // Load Customer.io JS
    !function(){
      var i="cioanalytics", analytics=(window[i]=window[i]||[]);
      if(!analytics.initialize){
        if(analytics.invoked) return;
        analytics.invoked = true;
        analytics.methods = ["track","page","identify"];
        analytics.factory = function(t){
          return function(){
            var e = Array.prototype.slice.call(arguments);
            e.unshift(t);
            analytics.push(e);
            return analytics;
          }
        };
        for(var t=0;t<analytics.methods.length;t++){
          var e=analytics.methods[t];
          analytics[e] = analytics.factory(e);
        }
        analytics.load = function(t){
          var e = document.createElement("script");
          e.type = "text/javascript";
          e.async = true;
          e.src = "https://cdp.customer.io/v1/analytics-js/snippet/" + t + "/analytics.min.js";
          var n = document.getElementsByTagName("script")[0];
          n.parentNode.insertBefore(e,n);
        };

        analytics.SNIPPET_VERSION = "4.15.3";
        analytics.load("386390ab72390ba7fa9e");
        analytics.page();
      }
    }();
  </script>

  <script>
    // Parse query parameters
    function getQueryParams() {
      const params = {};
      const queryString = window.location.search.substring(1);
      const pairs = queryString.split("&");
      for (const pair of pairs) {
        if (!pair) continue;
        const [key, value] = pair.split("=");
        params[decodeURIComponent(key)] = decodeURIComponent(value || "");
      }
      return params;
    }

    (function() {
      const params = getQueryParams();
      const eventName = params.en || 'CustomEvent';

      // If email is present, identify the user
      if (params.email) {
        cioanalytics.identify({ email: params.email });
      }

      // Track event with all params
      cioanalytics.track(eventName, params);
    })();
  </script>
</body>
</html>
