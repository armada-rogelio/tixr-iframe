<!DOCTYPE html>
<html>
<head>
  <title>Tixr Conversion Tracker</title>
  <meta charset="utf-8">

  <script>
   !function () {
    var i = "cioanalytics",
        analytics = (window[i] = window[i] || []);

    if (!analytics.initialize) {
      if (analytics.invoked) {
        window.console && console.error && console.error("Snippet included twice.");
      } else {
        analytics.invoked = true;
        analytics.methods = [
          "trackSubmit", "trackClick", "trackLink", "trackForm", "pageview", "identify",
          "reset", "group", "track", "ready", "alias", "debug", "page", "once", "off", "on",
          "addSourceMiddleware", "addIntegrationMiddleware", "setAnonymousId", "addDestinationMiddleware"
        ];

        analytics.factory = function (method) {
          return function () {
            var args = Array.prototype.slice.call(arguments);
            args.unshift(method);
            analytics.push(args);
            return analytics;
          };
        };

        for (var e = 0; e < analytics.methods.length; e++) {
          var key = analytics.methods[e];
          analytics[key] = analytics.factory(key);
        }

         analytics.load = function (key, options) {
          var script = document.createElement("script");
          script.type = "text/javascript";
          script.async = true;
          script.setAttribute('data-global-customerio-analytics-key', i);
          script.src = "https://cdp.customer.io/v1/analytics-js/snippet/" + key + "/analytics.min.js";
        
          var firstScript = document.getElementsByTagName("script")[0];
          firstScript.parentNode.insertBefore(script, firstScript);

          analytics._writeKey = key;
          analytics._loadOptions = options;
        };

        
        analytics.SNIPPET_VERSION = "4.15.3";
 
        analytics.load("386390ab72390ba7fa9e");


      const params = getQueryParams();
      const hasParams = Object.keys(params).length > 0;
      const eventName = params.en || 'CustomEvent';

      
      // Use sample params if none provided
      const dataToSend = hasParams ? params : {
        sampleParam: 'sampleValue',
        timestamp: new Date().toISOString()
      };
      console.log(dataToSend);
      // Track event
      cioanalytics.track(eventName, dataToSend);

        analytics.page();
  
      }
    }
  }();

    // Parse query parameters
    function getQueryParams() {
      const params = {};
      const queryString = window.location.search.substring(1);
      const pairs = queryString.split("&");
      for (const pair of pairs) {
        if (!pair) continue;
        const [key, value] = pair.split("=");
        params[decodeURIComponent(key)] = decodeURIComponent(value || "");
      }
      return params;
    }

    // (function() {
    //   const params = getQueryParams();
    //   const hasParams = Object.keys(params).length > 0;
    //   const eventName = params.en || 'CustomEvent';

      
    //   // Use sample params if none provided
    //   const dataToSend = hasParams ? params : {
    //     sampleParam: 'sampleValue',
    //     timestamp: new Date().toISOString()
    //   };
    //   console.log("tixr");
    //   // Track event
    //   cioanalytics.track(eventName, dataToSend);

    //   // If email is present, identify the user
    //   if (params.email) {
    //     // cioanalytics.identify({ email: params.email });
    //   }

    //   // Track event with all params
    //   // cioanalytics.track(eventName, params);
    // })();
  </script>
</head>

<body>
 
</body>
</html>
